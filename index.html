<!DOCTYPE html>
<html>
<head>
    <title>한글과 영어 암호화/복호화</title>
</head>
<body>
    <h1>한글과 영어 암호화/복호화</h1>
    <label for="inputText">원문:</label>
    <textarea id="inputText" rows="4" cols="50"></textarea><br>
    <label for="shift">시프트 값:</label>
    <input type="number" id="shift" value="3"><br>
    <button onclick="encrypt()">암호화</button>
    <button onclick="decrypt()">복호화</button><br>
    <label for="outputText">결과:</label>
    <textarea id="outputText" rows="4" cols="50" readonly></textarea>

    <script>
        function encrypt() {
            const inputText = document.getElementById('inputText').value;
            const shift = parseInt(document.getElementById('shift').value);
            const encryptedText = caesarCipher(inputText, shift);
            document.getElementById('outputText').value = encryptedText;
        }

        function decrypt() {
            const inputText = document.getElementById('inputText').value;
            const shift = parseInt(document.getElementById('shift').value);
            const decryptedText = caesarCipher(inputText, -shift);
            document.getElementById('outputText').value = decryptedText;
        }

        function caesarCipher(text, shift) {
            return text
                .split('')
                .map(char => {
                    if (/[A-Za-z]/.test(char)) {
                        // 영어 문자 처리
                        const charCode = char.charCodeAt(0);
                        const base = charCode >= 65 && charCode <= 90 ? 65 : 97;
                        const encryptedCharCode = ((charCode - base + shift) % 26 + 26) % 26 + base;
                        return String.fromCharCode(encryptedCharCode);
                    } else if (/[가-힣]/.test(char)) {
                        // 한글 문자 처리
                        const charCode = char.charCodeAt(0);
                        const base = 44032;
                        const offset = charCode - base;
                        const jong = offset % 28;
                        const jung = ((offset - jong) / 28) % 21;
                        const cho = (((offset - jong) / 28) - jung) / 21;
                        const encryptedCho = (cho + shift) % 19;
                        const encryptedJung = (jung + shift) % 21;
                        const encryptedJong = (jong + shift) % 28;
                        const encryptedCharCode = base + (encryptedCho * 21 * 28) + (encryptedJung * 28) + encryptedJong;
                        return String.fromCharCode(encryptedCharCode);
                    } else {
                        return char;
                    }
                })
                .join('');
        }
    </script>
</body>
</html>
